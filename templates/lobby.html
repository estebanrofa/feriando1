<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feriando.uy - Ferias de Montevideo</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='lobby.css') }}">
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo" id="splashLogo">
            <span class="splash-feriando">Feriando</span><span class="splash-uy">.uy</span>
        </div>
        <div class="splash-underline" id="splashUnderline"></div>
    </div>

    <header class="lobby-header">
        <div class="auth-links">
            <a href="/login" class="auth-link">Iniciar sesi√≥n</a>
            <a href="#" class="auth-link" onclick="abrirModalTipoUsuario(event)">Crear cuenta</a>
        </div>
        <h1 class="logo">Feriando.uy</h1>
    </header>
    
    <div class="lobby-container">
        <div class="seccion-mapa">
            <a href="/mapa" class="opcion-mapa">
                <div class="icono">üó∫Ô∏è</div>
                <h2>Mapa de ferias</h2>
            </a>
        </div>
        
        <div class="filtros-wrapper">
            <div class="filtro-toggle" onclick="toggleFiltros()">
                <span class="filtro-texto">Filtrar</span>
                <span class="filtro-flecha" id="filtroFlecha">‚ñ≤</span>
            </div>
            
            <div class="filtros-panel" id="filtrosPanel" style="display: none;">
                <div class="filtros-opciones">
                    <button class="filtro-btn active" id="btnDia" onclick="cambiarFiltro('dia')">Por d√≠a</button>
                    <button class="filtro-btn" id="btnBarrio" onclick="cambiarFiltro('barrio')">Por barrio</button>
                </div>
                
                <div class="filtros-items" id="grupodia">
                    <div class="filtro-grupo">
                        <div class="filtro-item" onclick="filtrarFerias('Lunes')">Lunes</div>
                        <div class="filtro-item" onclick="filtrarFerias('Martes')">Martes</div>
                        <div class="filtro-item" onclick="filtrarFerias('Mi√©rcoles')">Mi√©rcoles</div>
                        <div class="filtro-item" onclick="filtrarFerias('Jueves')">Jueves</div>
                        <div class="filtro-item" onclick="filtrarFerias('Viernes')">Viernes</div>
                        <div class="filtro-item" onclick="filtrarFerias('S√°bados')">S√°bados</div>
                        <div class="filtro-item" onclick="filtrarFerias('Domingos')">Domingos</div>
                    </div>
                </div>
                
                <div class="filtros-items" id="grupobarrio" style="display: none;">
                    <div class="filtro-grupo">
                        <div class="filtro-item" onclick="filtrarFerias('Cord√≥n')">Cord√≥n</div>
                        <div class="filtro-item" onclick="filtrarFerias('Tres Cruces')">Tres Cruces</div>
                        <div class="filtro-item" onclick="filtrarFerias('La Comercial')">La Comercial</div>
                        <div class="filtro-item" onclick="filtrarFerias('Villa Mu√±oz')">Villa Mu√±oz</div>
                        <div class="filtro-item" onclick="filtrarFerias('Parque Rod√≥')">Parque Rod√≥</div>
                        <div class="filtro-item" onclick="filtrarFerias('Palermo')">Palermo</div>
                        <div class="filtro-item" onclick="filtrarFerias('Centro')">Centro</div>
                    </div>
                </div>
                
                <button class="btn-limpiar" onclick="limpiarFiltros()">üîÑ Limpiar filtros</button>
            </div>
        </div>

        <div class="scroll-hint">
            <span class="scroll-hint-arrow">‚Üê</span>
            <span class="scroll-hint-text">Desliz√°</span>
            <span class="scroll-hint-arrow">‚Üí</span>
        </div>

        <div class="seccion-ferias-wrapper">
            <button class="scroll-btn scroll-btn-left" id="scrollLeft">‚óÄ</button>
            <button class="scroll-btn scroll-btn-right" id="scrollRight">‚ñ∂</button>
            
            <div class="seccion-ferias" id="seccionFerias">
                <a href="/tristan-narvaja" class="opcion-card" data-dia="Domingos" data-barrio="Cord√≥n">
                    <div class="icono">üìö</div>
                    <div class="opcion-card-content">
                        <h2>Trist√°n Narvaja</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ Domingos</p>
                        <p>La feria m√°s famosa de MVD</p>
                    </div>
                </a>
                <a href="/juan-paullier" class="opcion-card" data-dia="Martes" data-barrio="Tres Cruces">
                    <div class="icono">ü•¨</div>
                    <div class="opcion-card-content">
                        <h2>Juan Paullier</h2>
                        <p class="barrio">Tres Cruces ‚Ä¢ Martes</p>
                        <p>Productos frescos de barrio</p>
                    </div>
                </a>
                <a href="/tres-cruces" class="opcion-card" data-dia="S√°bados" data-barrio="La Comercial">
                    <div class="icono">üõí</div>
                    <div class="opcion-card-content">
                        <h2>Tres Cruces</h2>
                        <p class="barrio">La Comercial ‚Ä¢ S√°bados</p>
                        <p>Feria de barrio variada</p>
                    </div>
                </a>
                <a href="/calle-salto" class="opcion-card" data-dia="S√°bados" data-barrio="Cord√≥n">
                    <div class="icono">ü•ï</div>
                    <div class="opcion-card-content">
                        <h2>Calle Salto</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ S√°bados</p>
                        <p>Productos locales</p>
                    </div>
                </a>
                <a href="/democracia" class="opcion-card" data-dia="Domingos" data-barrio="Villa Mu√±oz">
                    <div class="icono">üåΩ</div>
                    <div class="opcion-card-content">
                        <h2>Democracia</h2>
                        <p class="barrio">Villa Mu√±oz ‚Ä¢ Domingos</p>
                        <p>Productos de granja</p>
                    </div>
                </a>
                <a href="/acevedo-diaz" class="opcion-card" data-dia="Martes" data-barrio="Parque Rod√≥">
                    <div class="icono">ü•¶</div>
                    <div class="opcion-card-content">
                        <h2>Acevedo D√≠az</h2>
                        <p class="barrio">Parque Rod√≥ ‚Ä¢ Martes</p>
                        <p>Feria vecinal</p>
                    </div>
                </a>
                <a href="/san-salvador" class="opcion-card" data-dia="Mi√©rcoles" data-barrio="Parque Rod√≥">
                    <div class="icono">üçÖ</div>
                    <div class="opcion-card-content">
                        <h2>San Salvador</h2>
                        <p class="barrio">Parque Rod√≥ ‚Ä¢ Mi√©rcoles</p>
                        <p>Productos frescos</p>
                    </div>
                </a>
                <a href="/isla-flores" class="opcion-card" data-dia="Jueves" data-barrio="Palermo">
                    <div class="icono">ü•ó</div>
                    <div class="opcion-card-content">
                        <h2>Isla de Flores</h2>
                        <p class="barrio">Palermo ‚Ä¢ Jueves</p>
                        <p>Feria de barrio</p>
                    </div>
                </a>
                <a href="/martinez-trueba" class="opcion-card" data-dia="Martes" data-barrio="Palermo">
                    <div class="icono">üçá</div>
                    <div class="opcion-card-content">
                        <h2>Mart√≠nez Trueba</h2>
                        <p class="barrio">Palermo ‚Ä¢ Martes</p>
                        <p>Productos de estaci√≥n</p>
                    </div>
                </a>
                <a href="/julio-herrera" class="opcion-card" data-dia="Viernes" data-barrio="Centro">
                    <div class="icono">üçä</div>
                    <div class="opcion-card-content">
                        <h2>Julio Herrera y Obes</h2>
                        <p class="barrio">Centro ‚Ä¢ Viernes</p>
                        <p>Feria vecinal</p>
                    </div>
                </a>
                <a href="/acevedo-diaz-sabados" class="opcion-card" data-dia="S√°bados" data-barrio="Cord√≥n">
                    <div class="icono">ü•¨</div>
                    <div class="opcion-card-content">
                        <h2>Acevedo D√≠az</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ S√°bados</p>
                        <p>Productos frescos</p>
                    </div>
                </a>
                <a href="/guana" class="opcion-card" data-dia="Viernes" data-barrio="Cord√≥n">
                    <div class="icono">üå∂Ô∏è</div>
                    <div class="opcion-card-content">
                        <h2>Guan√°</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ Viernes</p>
                        <p>Productos locales</p>
                    </div>
                </a>
                <a href="/gaboto-viernes" class="opcion-card" data-dia="Viernes" data-barrio="Cord√≥n">
                    <div class="icono">üõ†Ô∏è</div>
                    <div class="opcion-card-content">
                        <h2>Gaboto</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ Viernes</p>
                        <p>Feria variada</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <div class="seccion-extra">
        <h2 class="porque-titulo">¬øPor que <span class="texto-verde">Feriando</span>?</h2>
        
        <div class="porque-feriando">
            <div class="porque-contenido">
                <div class="porque-columna">
                    <h3>Para quienes caminan la feria</h3>
                    <p>Porque la feria no se recorre al azar: se vive. Feriando te ayuda a encontrar lo que busc√°s, descubrir lo que no sab√≠as que quer√≠as y caminar cada cuadra con m√°s sentido y menos vueltas.</p>
                </div>
                
                <div class="porque-columna">
                    <h3>Para quienes la hacen posible</h3>
                    <p>Porque cada puesto tiene una historia. Feriando te pone en el mapa para que m√°s personas lleguen a vos, valoren tu rubro y mantengan viva la feria de siempre.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="seccion-nueva">
        <h2 class="como-titulo">¬øC√≥mo <span class="texto-oscuro">funciona</span>?</h2>

        <div class="como-funciona">
            <div class="como-card">
                <h3>Explor√° la Feria</h3>
                <p>Entr√°s, conoc√©s todas las ferias de Montevideo, y eleg√≠s la que m√°s se ajuste a tus gustos y tiempos.</p>
            </div>

            <div class="como-card">
                <h3>Encontr√° lo que busc√°s (y lo que no)</h3>
                <p>Eleg√≠ la feria, recorr√© el mapa y descubr√≠ nuevas experiencias sin perderte nada.</p>
            </div>

            <div class="como-card">
                <h3>Conect√° con quienes venden</h3>
                <p>Los feriantes muestran su rubro y su lugar. Vos lleg√°s directo, ellos reciben a quien realmente busca lo que ofrecen.</p>
            </div>
        </div>
    </div>

    <div class="seccion-bordo">
        <h2 class="equipo-titulo">Conoc√© a nuestro <span class="texto-rojo">equipo</span></h2>
        <div class="fundador-card">
            <img src="{{ url_for('static', filename='fundador.png') }}" alt="Fundador" class="fundador-img">
            <p class="fundador-nombre">Esteban Rodrigues</p>
            <p class="fundador-cargo">Fundador</p>
        </div>
    </div>

    <footer class="footer-bar">
        <span>Feriando.uy 2026 <span class="copyright">¬©</span></span>
        <div class="footer-divider"></div>
        <a href="/terminos" class="footer-link">Terminos y condiciones</a>
    </footer>

    <!-- Modal Tipo de Usuario -->
    <div class="modal-overlay" id="modalTipoUsuario" onclick="cerrarModalTipoUsuario(event)">
        <div class="modal-contenido" onclick="event.stopPropagation()">
            <button class="modal-cerrar" onclick="cerrarModalTipoUsuario(event)">&times;</button>

            <!-- Paso 1: Tipo de usuario -->
            <div id="modalPaso1">
                <h2 class="modal-titulo">¬øC√≥mo vas a usar Feriando?</h2>
                <div class="modal-opciones">
                    <a href="/registro?tipo=visitante" class="modal-opcion">
                        <div class="modal-opcion-icono">üõí</div>
                        <h3>Recorro la feria</h3>
                        <p>Busco productos, exploro puestos y descubro nuevas ferias</p>
                    </a>
                    <div class="modal-opcion" onclick="mostrarPasoDGI()">
                        <div class="modal-opcion-icono">üè™</div>
                        <h3>Soy vendedor</h3>
                        <p>Tengo un puesto y quiero que m√°s gente me encuentre</p>
                    </div>
                </div>
            </div>

            <!-- Paso 2: Registro DGI -->
            <div id="modalPaso2" style="display: none;">
                <button class="modal-volver" onclick="volverPaso1()">‚Üê Volver</button>
                <h2 class="modal-titulo">¬øTu puesto est√° declarado ante la Intendencia de Montevideo?</h2>
                <div class="modal-opciones">
                    <a href="/registro?tipo=vendedor&declarado=si" class="modal-opcion">
                        <div class="modal-opcion-icono">‚úÖ</div>
                        <h3>S√≠</h3>
                        <p>Ya tengo mi puesto declarado</p>
                    </a>
                    <a href="/registro?tipo=vendedor&declarado=no" class="modal-opcion">
                        <div class="modal-opcion-icono">üìù</div>
                        <h3>Quiero declararlo</h3>
                        <p>Necesito ayuda para dar de alta mi puesto</p>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function abrirModalTipoUsuario(event) {
            event.preventDefault();
            document.getElementById('modalPaso1').style.display = 'block';
            document.getElementById('modalPaso2').style.display = 'none';
            document.getElementById('modalTipoUsuario').classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function cerrarModalTipoUsuario(event) {
            document.getElementById('modalTipoUsuario').classList.remove('visible');
            document.body.style.overflow = '';
        }

        function mostrarPasoDGI() {
            document.getElementById('modalPaso1').style.display = 'none';
            document.getElementById('modalPaso2').style.display = 'block';
        }

        function volverPaso1() {
            document.getElementById('modalPaso1').style.display = 'block';
            document.getElementById('modalPaso2').style.display = 'none';
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                cerrarModalTipoUsuario();
            }
        });
    </script>

    <script>
        var filtroActivo = null;
        var tipoFiltro = 'dia';
        
        function toggleFiltros() {
            var panel = document.getElementById('filtrosPanel');
            var flecha = document.getElementById('filtroFlecha');
            
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                flecha.textContent = '‚ñº';
            } else {
                panel.style.display = 'none';
                flecha.textContent = '‚ñ≤';
            }
        }
        
        function cambiarFiltro(tipo) {
            tipoFiltro = tipo;
            
            document.getElementById('btnDia').classList.remove('active');
            document.getElementById('btnBarrio').classList.remove('active');
            document.getElementById('btn' + tipo.charAt(0).toUpperCase() + tipo.slice(1)).classList.add('active');
            
            document.getElementById('grupodia').style.display = tipo === 'dia' ? 'block' : 'none';
            document.getElementById('grupobarrio').style.display = tipo === 'barrio' ? 'block' : 'none';
            
            limpiarFiltros();
        }
        
        function filtrarFerias(valor) {
            filtroActivo = valor;
            var cards = document.querySelectorAll('.opcion-card');
            var atributo = 'data-' + tipoFiltro;
            var visibles = 0;
            
            document.querySelectorAll('.filtro-item').forEach(function(item) {
                if (item.textContent === valor) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            cards.forEach(function(card) {
                if (card.getAttribute(atributo) === valor) {
                    card.style.display = 'flex';
                    visibles++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            toggleFiltros();
            
            setTimeout(updateScrollButtons, 100);
        }
        
        function limpiarFiltros() {
            filtroActivo = null;
            var cards = document.querySelectorAll('.opcion-card');
            
            cards.forEach(function(card) {
                card.style.display = 'flex';
            });
            
            document.querySelectorAll('.filtro-item').forEach(function(item) {
                item.classList.remove('active');
            });
            
            setTimeout(updateScrollButtons, 100);
        }
        
        document.addEventListener('click', function(event) {
            var filtrosWrapper = document.querySelector('.filtros-wrapper');
            var panel = document.getElementById('filtrosPanel');
            
            if (filtrosWrapper && !filtrosWrapper.contains(event.target) && panel.style.display === 'block') {
                toggleFiltros();
            }
        });
    </script>
    
    <script>
        var seccionFerias = document.getElementById('seccionFerias');
        var scrollLeft = document.getElementById('scrollLeft');
        var scrollRight = document.getElementById('scrollRight');

        function updateScrollButtons() {
            if (!seccionFerias) return;
            
            var maxScroll = seccionFerias.scrollWidth - seccionFerias.clientWidth;
            
            if (seccionFerias.scrollLeft > 10) {
                scrollLeft.classList.add('visible');
            } else {
                scrollLeft.classList.remove('visible');
            }
            
            if (seccionFerias.scrollLeft < maxScroll - 10) {
                scrollRight.classList.add('visible');
            } else {
                scrollRight.classList.remove('visible');
            }
        }

        if (scrollLeft && scrollRight && seccionFerias) {
            scrollLeft.addEventListener('click', function() {
                seccionFerias.scrollBy({
                    left: -600,
                    behavior: 'smooth'
                });
            });

            scrollRight.addEventListener('click', function() {
                seccionFerias.scrollBy({
                    left: 600,
                    behavior: 'smooth'
                });
            });

            seccionFerias.addEventListener('scroll', updateScrollButtons);
            
            window.addEventListener('load', updateScrollButtons);
            window.addEventListener('resize', updateScrollButtons);
            
            setTimeout(updateScrollButtons, 500);
        }
    </script>

    <script>
        // Splash Screen Animation
        document.addEventListener('DOMContentLoaded', function() {
            var splash = document.getElementById('splashScreen');
            var splashLogo = document.getElementById('splashLogo');
            var splashUnderline = document.getElementById('splashUnderline');

            // Ocultar contenido inicial
            document.body.classList.add('loading');

            // Esperar a que cargue todo
            window.addEventListener('load', function() {
                setTimeout(function() {
                    // Desvanecer splash y mostrar contenido
                    splash.classList.add('fade-out');
                    document.body.classList.remove('loading');
                    document.body.classList.add('loaded');

                    setTimeout(function() {
                        splash.style.display = 'none';
                    }, 500);
                }, 1500);
            });
        });
    </script>
</body>
</html>