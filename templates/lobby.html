<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feriando.uy - Ferias de Montevideo</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Descubr√≠ todas las ferias de Montevideo. Encontr√° productos frescos, antig√ºedades, ropa y m√°s. Conect√° con los feriantes de tu barrio.">
    <meta name="keywords" content="ferias, montevideo, uruguay, trist√°n narvaja, feria, mercado, productos frescos, antig√ºedades, feriantes">
    <meta name="author" content="Feriando.uy">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://feriando.uy/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://feriando.uy/">
    <meta property="og:title" content="Feriando.uy - Descubr√≠ las ferias de Montevideo">
    <meta property="og:description" content="Explor√° las ferias de Montevideo. Encontr√° productos frescos, antig√ºedades, ropa y conect√° con los feriantes de tu barrio.">
    <meta property="og:image" content="{{ url_for('static', filename='og-image.png', _external=True) }}">
    <meta property="og:locale" content="es_UY">
    <meta property="og:site_name" content="Feriando.uy">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://feriando.uy/">
    <meta name="twitter:title" content="Feriando.uy - Descubr√≠ las ferias de Montevideo">
    <meta name="twitter:description" content="Explor√° las ferias de Montevideo. Encontr√° productos frescos, antig√ºedades, ropa y conect√° con los feriantes.">
    <meta name="twitter:image" content="{{ url_for('static', filename='og-image.png', _external=True) }}">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#7BB662">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Feriando">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icon-192.png') }}">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon.png') }}">

    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">

    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='lobby.css') }}">

    <!-- Google Analytics -->
    {% if ga_id %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ ga_id }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ ga_id }}');
    </script>
    {% endif %}

    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Feriando.uy",
        "description": "Plataforma para descubrir ferias de Montevideo",
        "url": "https://feriando.uy",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "Feriando.uy",
            "founder": {
                "@type": "Person",
                "name": "Esteban Rodrigues"
            }
        },
        "areaServed": {
            "@type": "City",
            "name": "Montevideo",
            "containedInPlace": {
                "@type": "Country",
                "name": "Uruguay"
            }
        }
    }
    </script>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo" id="splashLogo">
            <span class="splash-feriando">Feriando</span><span class="splash-uy">.uy</span>
        </div>
        <div class="splash-underline" id="splashUnderline"></div>
    </div>

    <header class="lobby-header">
        <a href="/" class="logo"><img src="{{ url_for('static', filename='favicon.png') }}" alt="" class="logo-icon">Feriando.uy</a>
        <nav class="header-nav">
            <a href="#" class="nav-btn" onclick="scrollToTop(event)">Inicio</a>
            <a href="#" class="nav-btn" onclick="scrollToSection(event, 'porque-feriando')">¬øPor qu√© Feriando?</a>
            <a href="#" class="nav-btn" onclick="scrollToSection(event, 'como-funciona')">¬øC√≥mo funciona?</a>
            <a href="#" class="nav-btn" onclick="scrollToSection(event, 'nosotros')">Nosotros</a>
            <a href="#" class="nav-btn" onclick="scrollToSection(event, 'contacto')">Contacto</a>
        </nav>
        <div class="auth-links" id="authLinks">
            <a href="/login" class="auth-link">Iniciar sesi√≥n</a>
            <a href="#" class="auth-link" onclick="abrirModalTipoUsuario(event)">Crear cuenta</a>
        </div>
        <div class="user-menu" id="userMenu" style="display: none;">
            <div class="user-avatar" onclick="toggleUserDropdown()">
                <span id="userInitial">U</span>
            </div>
            <div class="user-dropdown" id="userDropdown">
                <a href="#" class="dropdown-item">Configuraci√≥n</a>
                <a href="#" class="dropdown-item">Mis ferias</a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item dropdown-logout" onclick="cerrarSesion(event)">Cerrar sesi√≥n</a>
            </div>
        </div>
        <button class="menu-hamburguesa" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <div class="menu-overlay" id="menuOverlay" onclick="cerrarMenu()"></div>
    <div class="menu-mobile" id="menuMobile">
        <a href="#" class="menu-mobile-btn" onclick="scrollToTop(event); cerrarMenu()">Inicio</a>
        <a href="#" class="menu-mobile-btn" onclick="scrollToSection(event, 'porque-feriando'); cerrarMenu()">¬øPor qu√© Feriando?</a>
        <a href="#" class="menu-mobile-btn" onclick="scrollToSection(event, 'como-funciona'); cerrarMenu()">¬øC√≥mo funciona?</a>
        <a href="#" class="menu-mobile-btn" onclick="scrollToSection(event, 'nosotros'); cerrarMenu()">Nosotros</a>
        <a href="#" class="menu-mobile-btn" onclick="scrollToSection(event, 'contacto'); cerrarMenu()">Contacto</a>
        <div class="menu-mobile-divider"></div>
        <div id="menuMobileAuth">
            <a href="/login" class="menu-mobile-btn">Iniciar sesi√≥n</a>
            <a href="#" class="menu-mobile-btn" onclick="abrirModalTipoUsuario(event); cerrarMenu()">Crear cuenta</a>
        </div>
        <div id="menuMobileUser" style="display: none;">
            <a href="#" class="menu-mobile-btn">Configuraci√≥n</a>
            <a href="#" class="menu-mobile-btn">Mis ferias</a>
            <a href="#" class="menu-mobile-btn menu-mobile-logout" onclick="cerrarSesion(event); cerrarMenu()">Cerrar sesi√≥n</a>
        </div>
    </div>
    
    <div class="lobby-container">
        <div class="seccion-mapa">
            <img src="{{ url_for('static', filename='fondo-boton.png') }}" alt="" class="fondo-mapa">
            <a href="/mapa" class="opcion-mapa">
                <h2>Mapa de ferias</h2>
            </a>
        </div>
        
        <h2 class="ferias-titulo">Explor√° las <span class="texto-verde">ferias</span></h2>

        <div class="filtros-wrapper">
            <div class="filtro-toggle" onclick="toggleFiltros()">
                <span class="filtro-texto">Filtrar</span>
                <span class="filtro-flecha" id="filtroFlecha">‚ñ≤</span>
            </div>

            <div class="filtros-panel" id="filtrosPanel" style="display: none;">
                <div class="filtros-opciones">
                    <button class="filtro-btn active" id="btnDia" onclick="cambiarFiltro('dia')">Por d√≠a</button>
                    <button class="filtro-btn" id="btnBarrio" onclick="cambiarFiltro('barrio')">Por barrio</button>
                </div>

                <div class="filtros-items" id="grupodia">
                    <div class="filtro-grupo">
                        <div class="filtro-item" onclick="filtrarFerias('Lunes')">Lunes</div>
                        <div class="filtro-item" onclick="filtrarFerias('Martes')">Martes</div>
                        <div class="filtro-item" onclick="filtrarFerias('Mi√©rcoles')">Mi√©rcoles</div>
                        <div class="filtro-item" onclick="filtrarFerias('Jueves')">Jueves</div>
                        <div class="filtro-item" onclick="filtrarFerias('Viernes')">Viernes</div>
                        <div class="filtro-item" onclick="filtrarFerias('S√°bados')">S√°bados</div>
                        <div class="filtro-item" onclick="filtrarFerias('Domingos')">Domingos</div>
                    </div>
                </div>

                <div class="filtros-items" id="grupobarrio" style="display: none;">
                    <div class="filtro-grupo">
                        <div class="filtro-item" onclick="filtrarFerias('Cord√≥n')">Cord√≥n</div>
                        <div class="filtro-item" onclick="filtrarFerias('Tres Cruces')">Tres Cruces</div>
                        <div class="filtro-item" onclick="filtrarFerias('La Comercial')">La Comercial</div>
                        <div class="filtro-item" onclick="filtrarFerias('Villa Mu√±oz')">Villa Mu√±oz</div>
                        <div class="filtro-item" onclick="filtrarFerias('Parque Rod√≥')">Parque Rod√≥</div>
                        <div class="filtro-item" onclick="filtrarFerias('Palermo')">Palermo</div>
                        <div class="filtro-item" onclick="filtrarFerias('Centro')">Centro</div>
                    </div>
                </div>

                <button class="btn-limpiar" onclick="limpiarFiltros()">üîÑ Limpiar filtros</button>
            </div>
        </div>

        <div class="scroll-hint">
            <span class="scroll-hint-arrow">‚Üê</span>
            <span class="scroll-hint-text">Desliz√°</span>
            <span class="scroll-hint-arrow">‚Üí</span>
        </div>

        <div class="seccion-ferias-wrapper">
            <button class="scroll-btn scroll-btn-left" id="scrollLeft">‚óÄ</button>
            <button class="scroll-btn scroll-btn-right" id="scrollRight">‚ñ∂</button>
            
            <div class="seccion-ferias" id="seccionFerias">
                <a href="/tristan-narvaja" class="opcion-card" data-dia="Domingos" data-barrio="Cord√≥n" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üìö</div>
                    <div class="opcion-card-content">
                        <h2>Trist√°n Narvaja</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ Domingos</p>
                        <p>La feria m√°s famosa de MVD</p>
                    </div>
                </a>
                <a href="/juan-paullier" class="opcion-card" data-dia="Martes" data-barrio="Tres Cruces" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">ü•¨</div>
                    <div class="opcion-card-content">
                        <h2>Juan Paullier</h2>
                        <p class="barrio">Tres Cruces ‚Ä¢ Martes</p>
                        <p>Productos frescos de barrio</p>
                    </div>
                </a>
                <a href="/tres-cruces" class="opcion-card" data-dia="S√°bados" data-barrio="La Comercial" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üõí</div>
                    <div class="opcion-card-content">
                        <h2>Tres Cruces</h2>
                        <p class="barrio">La Comercial ‚Ä¢ S√°bados</p>
                        <p>Feria de barrio variada</p>
                    </div>
                </a>
                <a href="/calle-salto" class="opcion-card" data-dia="S√°bados" data-barrio="Cord√≥n" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">ü•ï</div>
                    <div class="opcion-card-content">
                        <h2>Calle Salto</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ S√°bados</p>
                        <p>Productos locales</p>
                    </div>
                </a>
                <a href="/democracia" class="opcion-card" data-dia="Domingos" data-barrio="Villa Mu√±oz" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üåΩ</div>
                    <div class="opcion-card-content">
                        <h2>Democracia</h2>
                        <p class="barrio">Villa Mu√±oz ‚Ä¢ Domingos</p>
                        <p>Productos de granja</p>
                    </div>
                </a>
                <a href="/acevedo-diaz" class="opcion-card" data-dia="Martes" data-barrio="Parque Rod√≥" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">ü•¶</div>
                    <div class="opcion-card-content">
                        <h2>Acevedo D√≠az</h2>
                        <p class="barrio">Parque Rod√≥ ‚Ä¢ Martes</p>
                        <p>Feria vecinal</p>
                    </div>
                </a>
                <a href="/san-salvador" class="opcion-card" data-dia="Mi√©rcoles" data-barrio="Parque Rod√≥" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üçÖ</div>
                    <div class="opcion-card-content">
                        <h2>San Salvador</h2>
                        <p class="barrio">Parque Rod√≥ ‚Ä¢ Mi√©rcoles</p>
                        <p>Productos frescos</p>
                    </div>
                </a>
                <a href="/isla-flores" class="opcion-card" data-dia="Jueves" data-barrio="Palermo" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">ü•ó</div>
                    <div class="opcion-card-content">
                        <h2>Isla de Flores</h2>
                        <p class="barrio">Palermo ‚Ä¢ Jueves</p>
                        <p>Feria de barrio</p>
                    </div>
                </a>
                <a href="/martinez-trueba" class="opcion-card" data-dia="Martes" data-barrio="Palermo" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üçá</div>
                    <div class="opcion-card-content">
                        <h2>Mart√≠nez Trueba</h2>
                        <p class="barrio">Palermo ‚Ä¢ Martes</p>
                        <p>Productos de estaci√≥n</p>
                    </div>
                </a>
                <a href="/julio-herrera" class="opcion-card" data-dia="Viernes" data-barrio="Centro" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üçä</div>
                    <div class="opcion-card-content">
                        <h2>Julio Herrera y Obes</h2>
                        <p class="barrio">Centro ‚Ä¢ Viernes</p>
                        <p>Feria vecinal</p>
                    </div>
                </a>
                <a href="/acevedo-diaz-sabados" class="opcion-card" data-dia="S√°bados" data-barrio="Cord√≥n" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">ü•¨</div>
                    <div class="opcion-card-content">
                        <h2>Acevedo D√≠az</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ S√°bados</p>
                        <p>Productos frescos</p>
                    </div>
                </a>
                <a href="/guana" class="opcion-card" data-dia="Viernes" data-barrio="Cord√≥n" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üå∂Ô∏è</div>
                    <div class="opcion-card-content">
                        <h2>Guan√°</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ Viernes</p>
                        <p>Productos locales</p>
                    </div>
                </a>
                <a href="/gaboto-viernes" class="opcion-card" data-dia="Viernes" data-barrio="Cord√≥n" onclick="mostrarModalLoginRequerido(event)">
                    <div class="icono">üõ†Ô∏è</div>
                    <div class="opcion-card-content">
                        <h2>Gaboto</h2>
                        <p class="barrio">Cord√≥n ‚Ä¢ Viernes</p>
                        <p>Feria variada</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <div class="seccion-extra" id="porque-feriando">
        <h2 class="porque-titulo">¬øPor que <span class="texto-verde">Feriando</span>?</h2>
        
        <div class="porque-feriando">
            <div class="porque-contenido">
                <div class="porque-columna">
                    <h3>Para quienes caminan la feria</h3>
                    <p>Porque la feria no se recorre al azar: se vive. Feriando te ayuda a encontrar lo que busc√°s, descubrir lo que no sab√≠as que quer√≠as y caminar cada cuadra con m√°s sentido y menos vueltas.</p>
                </div>
                
                <div class="porque-columna">
                    <h3>Para quienes la hacen posible</h3>
                    <p>Porque cada puesto tiene una historia. Feriando te pone en el mapa para que m√°s personas lleguen a vos, valoren tu rubro y mantengan viva la feria de siempre.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="seccion-nueva" id="como-funciona">
        <h2 class="como-titulo">¬øC√≥mo <span class="texto-oscuro">funciona</span>?</h2>

        <div class="como-funciona">
            <div class="como-card">
                <h3>Explor√° la Feria</h3>
                <p>Entr√°s, conoc√©s todas las ferias de Montevideo, y eleg√≠s la que m√°s se ajuste a tus gustos y tiempos.</p>
            </div>

            <div class="como-card">
                <h3>Encontr√° lo que busc√°s (y lo que no)</h3>
                <p>Recorr√© el mapa y descubr√≠, m√°s que nuevas ofertas, nuevas experiencias.</p>
            </div>

            <div class="como-card">
                <h3>Conect√° con quienes venden</h3>
                <p>Los feriantes muestran su rubro y su lugar. Vos ya sabes a donde ir. Contactalos para reservar tus productos favoritos.</p>
            </div>
        </div>
    </div>

    <div class="seccion-bordo" id="nosotros">
        <h2 class="equipo-titulo">Conoc√© a nuestro <span class="texto-rojo">equipo</span></h2>
        <div class="equipo-grid">
            <div class="equipo-card">
                <img src="{{ url_for('static', filename='fundador.png') }}" alt="Fundador" class="equipo-img">
                <p class="equipo-nombre">Esteban Rodrigues</p>
                <p class="equipo-cargo">Fundador</p>
            </div>
            <div class="equipo-card equipo-vacio">
                <div class="equipo-img-placeholder"></div>
                <p class="equipo-nombre">Pr√≥ximamente</p>
                <p class="equipo-cargo">-</p>
            </div>
            <div class="equipo-card equipo-vacio">
                <div class="equipo-img-placeholder"></div>
                <p class="equipo-nombre">Pr√≥ximamente</p>
                <p class="equipo-cargo">-</p>
            </div>
            <div class="equipo-card equipo-vacio">
                <div class="equipo-img-placeholder"></div>
                <p class="equipo-nombre">Pr√≥ximamente</p>
                <p class="equipo-cargo">-</p>
            </div>
            <div class="equipo-card equipo-vacio">
                <div class="equipo-img-placeholder"></div>
                <p class="equipo-nombre">Pr√≥ximamente</p>
                <p class="equipo-cargo">-</p>
            </div>
        </div>
    </div>

    <div class="seccion-contacto" id="contacto">
        <h2 class="contacto-titulo">Contactanos</h2>
        <form class="contacto-form">
            <div class="form-grupo">
                <label for="nombre">Nombre completo</label>
                <input type="text" id="nombre" name="nombre" required>
            </div>
            <div class="form-grupo">
                <label for="email">Correo Electr√≥nico</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-grupo">
                <label for="mensaje">Mensaje</label>
                <textarea id="mensaje" name="mensaje" rows="5" required></textarea>
            </div>
            <button type="submit" class="btn-enviar">Enviar</button>
        </form>
    </div>

    <footer class="footer-bar">
        <span>Feriando.uy <span class="copyright">¬©</span> 2026</span>
        <div class="footer-divider"></div>
        <a href="/terminos" class="footer-link">Terminos y condiciones</a>
    </footer>

    <!-- Modal Login Requerido -->
    <div class="modal-overlay" id="modalLoginRequerido" onclick="cerrarModalLogin(event)">
        <div class="modal-contenido modal-login-requerido" onclick="event.stopPropagation()">
            <button class="modal-cerrar" onclick="cerrarModalLogin(event)">&times;</button>
            <div class="modal-login-icono">üîí</div>
            <h2 class="modal-titulo">Deb√©s iniciar sesi√≥n</h2>
            <p class="modal-subtitulo">Para ver el detalle de las ferias necesit√°s tener una cuenta</p>
            <div class="modal-login-botones">
                <a href="/login" class="btn-modal-login">Iniciar sesi√≥n</a>
                <a href="#" class="btn-modal-registro" onclick="cerrarModalLogin(event); abrirModalTipoUsuario(event);">Crear cuenta</a>
            </div>
        </div>
    </div>

    <!-- Modal Tipo de Usuario -->
    <div class="modal-overlay" id="modalTipoUsuario" onclick="cerrarModalTipoUsuario(event)">
        <div class="modal-contenido" onclick="event.stopPropagation()">
            <button class="modal-cerrar" onclick="cerrarModalTipoUsuario(event)">&times;</button>

            <!-- Paso 1: Tipo de usuario -->
            <div id="modalPaso1">
                <h2 class="modal-titulo">¬øC√≥mo vas a usar Feriando?</h2>
                <div class="modal-opciones">
                    <a href="/registro?tipo=visitante" class="modal-opcion">
                        <div class="modal-opcion-icono">üõí</div>
                        <h3>Recorro la feria</h3>
                        <p>Busco productos, exploro puestos y descubro nuevas ferias</p>
                    </a>
                    <div class="modal-opcion" onclick="mostrarPasoDGI()">
                        <div class="modal-opcion-icono">üè™</div>
                        <h3>Soy vendedor</h3>
                        <p>Tengo un puesto y quiero que m√°s gente me encuentre</p>
                    </div>
                </div>
            </div>

            <!-- Paso 2: Registro DGI -->
            <div id="modalPaso2" style="display: none;">
                <button class="modal-volver" onclick="volverPaso1()">‚Üê Volver</button>
                <h2 class="modal-titulo">¬øTu puesto est√° declarado ante la Intendencia de Montevideo?</h2>
                <div class="modal-opciones">
                    <a href="/registro?tipo=vendedor&declarado=si" class="modal-opcion">
                        <div class="modal-opcion-icono">‚úÖ</div>
                        <h3>S√≠</h3>
                        <p>Ya tengo mi puesto declarado</p>
                    </a>
                    <a href="/registro?tipo=vendedor&declarado=no" class="modal-opcion">
                        <div class="modal-opcion-icono">üìù</div>
                        <h3>Quiero declararlo</h3>
                        <p>Necesito ayuda para dar de alta mi puesto</p>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleMenu() {
            var menu = document.getElementById('menuMobile');
            var overlay = document.getElementById('menuOverlay');
            menu.classList.toggle('visible');
            overlay.classList.toggle('visible');
        }

        function cerrarMenu() {
            var menu = document.getElementById('menuMobile');
            var overlay = document.getElementById('menuOverlay');
            menu.classList.remove('visible');
            overlay.classList.remove('visible');
        }

        function abrirModalTipoUsuario(event) {
            event.preventDefault();
            document.getElementById('modalPaso1').style.display = 'block';
            document.getElementById('modalPaso2').style.display = 'none';
            document.getElementById('modalTipoUsuario').classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function cerrarModalTipoUsuario(event) {
            document.getElementById('modalTipoUsuario').classList.remove('visible');
            document.body.style.overflow = '';
        }

        function mostrarPasoDGI() {
            document.getElementById('modalPaso1').style.display = 'none';
            document.getElementById('modalPaso2').style.display = 'block';
        }

        function volverPaso1() {
            document.getElementById('modalPaso1').style.display = 'block';
            document.getElementById('modalPaso2').style.display = 'none';
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                cerrarModalTipoUsuario();
            }
        });

        function scrollToTop(event) {
            event.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function scrollToSection(event, sectionId) {
            event.preventDefault();
            var section = document.getElementById(sectionId);
            var headerHeight = document.querySelector('.lobby-header').offsetHeight;
            window.scrollTo({
                top: section.offsetTop - headerHeight,
                behavior: 'smooth'
            });
        }
    </script>

    <script>
        var filtroActivo = null;
        var tipoFiltro = 'dia';
        
        function toggleFiltros() {
            var panel = document.getElementById('filtrosPanel');
            var flecha = document.getElementById('filtroFlecha');
            
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                flecha.textContent = '‚ñº';
            } else {
                panel.style.display = 'none';
                flecha.textContent = '‚ñ≤';
            }
        }
        
        function cambiarFiltro(tipo) {
            tipoFiltro = tipo;
            
            document.getElementById('btnDia').classList.remove('active');
            document.getElementById('btnBarrio').classList.remove('active');
            document.getElementById('btn' + tipo.charAt(0).toUpperCase() + tipo.slice(1)).classList.add('active');
            
            document.getElementById('grupodia').style.display = tipo === 'dia' ? 'block' : 'none';
            document.getElementById('grupobarrio').style.display = tipo === 'barrio' ? 'block' : 'none';
            
            limpiarFiltros();
        }
        
        function filtrarFerias(valor, noToggle) {
            filtroActivo = valor;
            var cards = document.querySelectorAll('.opcion-card');
            var atributo = 'data-' + tipoFiltro;
            var visibles = 0;

            // Guardar filtro en sessionStorage
            sessionStorage.setItem('filtroActivo', valor);
            sessionStorage.setItem('tipoFiltro', tipoFiltro);

            document.querySelectorAll('.filtro-item').forEach(function(item) {
                if (item.textContent === valor) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });

            cards.forEach(function(card) {
                if (card.getAttribute(atributo) === valor) {
                    card.style.display = 'flex';
                    visibles++;
                } else {
                    card.style.display = 'none';
                }
            });

            if (!noToggle) {
                toggleFiltros();
            }

            setTimeout(updateScrollButtons, 100);
        }
        
        function limpiarFiltros() {
            filtroActivo = null;
            var cards = document.querySelectorAll('.opcion-card');

            // Limpiar filtro del sessionStorage
            sessionStorage.removeItem('filtroActivo');
            sessionStorage.removeItem('tipoFiltro');

            cards.forEach(function(card) {
                card.style.display = 'flex';
            });

            document.querySelectorAll('.filtro-item').forEach(function(item) {
                item.classList.remove('active');
            });

            setTimeout(updateScrollButtons, 100);
        }

        // Restaurar filtro guardado al cargar la p√°gina
        function restaurarFiltro() {
            var filtroGuardado = sessionStorage.getItem('filtroActivo');
            var tipoGuardado = sessionStorage.getItem('tipoFiltro');

            if (filtroGuardado && tipoGuardado) {
                tipoFiltro = tipoGuardado;

                // Actualizar botones de tipo de filtro
                document.getElementById('btnDia').classList.remove('active');
                document.getElementById('btnBarrio').classList.remove('active');
                document.getElementById('btn' + tipoGuardado.charAt(0).toUpperCase() + tipoGuardado.slice(1)).classList.add('active');

                // Mostrar el grupo correcto
                document.getElementById('grupodia').style.display = tipoGuardado === 'dia' ? 'block' : 'none';
                document.getElementById('grupobarrio').style.display = tipoGuardado === 'barrio' ? 'block' : 'none';

                // Aplicar el filtro sin toggle
                filtrarFerias(filtroGuardado, true);
            }
        }

        // Ejecutar al cargar
        document.addEventListener('DOMContentLoaded', restaurarFiltro);

        document.addEventListener('click', function(event) {
            var filtrosWrapper = document.querySelector('.filtros-wrapper');
            var panel = document.getElementById('filtrosPanel');

            if (filtrosWrapper && !filtrosWrapper.contains(event.target) && panel.style.display === 'block') {
                toggleFiltros();
            }
        });
    </script>
    
    <script>
        var seccionFerias = document.getElementById('seccionFerias');
        var scrollLeft = document.getElementById('scrollLeft');
        var scrollRight = document.getElementById('scrollRight');

        function updateScrollButtons() {
            if (!seccionFerias) return;
            
            var maxScroll = seccionFerias.scrollWidth - seccionFerias.clientWidth;
            
            if (seccionFerias.scrollLeft > 10) {
                scrollLeft.classList.add('visible');
            } else {
                scrollLeft.classList.remove('visible');
            }
            
            if (seccionFerias.scrollLeft < maxScroll - 10) {
                scrollRight.classList.add('visible');
            } else {
                scrollRight.classList.remove('visible');
            }
        }

        if (scrollLeft && scrollRight && seccionFerias) {
            scrollLeft.addEventListener('click', function() {
                seccionFerias.scrollBy({
                    left: -600,
                    behavior: 'smooth'
                });
            });

            scrollRight.addEventListener('click', function() {
                seccionFerias.scrollBy({
                    left: 600,
                    behavior: 'smooth'
                });
            });

            seccionFerias.addEventListener('scroll', updateScrollButtons);
            
            window.addEventListener('load', updateScrollButtons);
            window.addEventListener('resize', updateScrollButtons);
            
            setTimeout(updateScrollButtons, 500);
        }
    </script>

    <script>
        // Splash Screen Animation
        document.addEventListener('DOMContentLoaded', function() {
            var splash = document.getElementById('splashScreen');
            var splashLogo = document.getElementById('splashLogo');
            var splashUnderline = document.getElementById('splashUnderline');

            // Verificar si viene de navegaci√≥n interna (bot√≥n volver)
            var esNavegacionInterna = sessionStorage.getItem('navegacionInterna');

            if (esNavegacionInterna) {
                // No mostrar splash, viene de navegaci√≥n interna
                sessionStorage.removeItem('navegacionInterna');
                splash.style.display = 'none';
                document.body.classList.remove('loading');
                document.body.classList.add('loaded');
            } else {
                // Mostrar splash normalmente
                document.body.classList.add('loading');

                window.addEventListener('load', function() {
                    setTimeout(function() {
                        splash.classList.add('fade-out');
                        document.body.classList.remove('loading');
                        document.body.classList.add('loaded');

                        setTimeout(function() {
                            splash.style.display = 'none';
                        }, 500);
                    }, 1500);
                });
            }
        });

        // Service Worker Registration (PWA)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/static/sw.js')
                    .then(function(registration) {
                        console.log('SW registrado:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('SW error:', error);
                    });
            });
        }

        // Estado de sesi√≥n global
        var usuarioLogueado = false;

        // Verificar sesi√≥n de usuario
        async function verificarSesion() {
            try {
                const response = await fetch('/api/sesion');
                const data = await response.json();

                if (data.logged_in) {
                    usuarioLogueado = true;
                    // Mostrar men√∫ de usuario
                    document.getElementById('authLinks').style.display = 'none';
                    document.getElementById('userMenu').style.display = 'block';
                    document.getElementById('menuMobileAuth').style.display = 'none';
                    document.getElementById('menuMobileUser').style.display = 'block';

                    // Poner inicial del nombre
                    const inicial = data.nombre ? data.nombre.charAt(0).toUpperCase() : 'U';
                    document.getElementById('userInitial').textContent = inicial;
                }
            } catch (error) {
                console.log('Error verificando sesi√≥n:', error);
            }
        }

        // Mostrar modal de login requerido
        function mostrarModalLoginRequerido(event) {
            event.preventDefault();
            if (!usuarioLogueado) {
                document.getElementById('modalLoginRequerido').classList.add('visible');
                document.body.style.overflow = 'hidden';
            } else {
                window.location.href = event.currentTarget.getAttribute('href');
            }
        }

        function cerrarModalLogin(event) {
            document.getElementById('modalLoginRequerido').classList.remove('visible');
            document.body.style.overflow = '';
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('visible');
        }

        // Cerrar dropdown al hacer clic fuera
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');

            if (userMenu && !userMenu.contains(event.target)) {
                dropdown.classList.remove('visible');
            }
        });

        async function cerrarSesion(event) {
            event.preventDefault();
            try {
                await fetch('/api/logout', { method: 'POST' });
                window.location.reload();
            } catch (error) {
                console.log('Error cerrando sesi√≥n:', error);
            }
        }

        // Verificar sesi√≥n al cargar
        verificarSesion();
    </script>
</body>
</html>